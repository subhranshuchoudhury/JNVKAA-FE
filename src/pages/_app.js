// VISITED: SUBHRANSHU CHOUDHURY

import '../../public/assets/css/bootstrap-icons.css';
import '../../public/assets/css/bootstrap.min.css';
import '../../public/assets/css/boxicons.min.css';
import '../../public/assets/css/swiper-bundle.css';
import '../../public/assets/css/slick-theme.css';
import '../../public/assets/css/slick.css';
import '../../public/assets/css/style.css';
import 'node_modules/react-modal-video/css/modal-video.css';
import "@/styles/globals.css";
import { useEffect , useState } from 'react';
import MainLayout from '@/components/layout/MainLayout';
import { useRouter } from 'next/router';
import Head from 'next/head';
import SmoothPageScroll from '@/components/common/SmoothPageScroll';
import { ThemeContext } from '@/components/ThemeContext';

export default function App({ Component, pageProps }) {
  const [theme, setTheme] = useState(""); 
  const router = useRouter();
  const excludedPages = ['/', "/index-2", "/index-3", "/index-4"]; // Add the paths of excluded pages here

  useEffect(() => {
    import('../../public/assets/js/bootstrap.bundle.min.js');
    import('../../public/assets/js/audio.js');
  }, []);

  useEffect(() => {
    const localTheme = localStorage.getItem('theme');
    if (localTheme) {
      setTheme(localTheme);
    }else {
      setTheme("light");
    }
  }, []);

  if(theme === "") return null;

  return (
    <>
      <Head>
        <title>
          JNVKAA - Connect, Inspire, Empower
        </title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/assets/images/logo/jnvkaa-logo2.png" />
      </Head>
      <ThemeContext.Provider value={{ theme , setTheme}}>
        {excludedPages.includes(router.asPath) ? (
          <>
            <Component {...pageProps} />
            <SmoothPageScroll />
          </>
        ) : (
          <MainLayout>
            <Component {...pageProps} />
            <SmoothPageScroll />
          </MainLayout>
        )}
      </ThemeContext.Provider>
    </>
  );
}
